<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        background-image: url(./bg.jpg);
        font-family: "Arial", sans-serif;
        /* line-height: 1.6; */
        margin: 0;
        display: flex;
        /* justify-content: center; */
        align-items: center;
        min-height: 100vh;
        background-color: #f2f2f2;
        flex-wrap: wrap;
        flex-direction: column;
      }

      form {
        width: 25%;
        height: auto;
        padding: 30px;
        border-radius: 10px;
        background-color: #fff;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      input,
      select {
        position: relative;
        display: block;
        width: 100%;
        padding-block: 12px;
        padding-inline: 4px;
        margin-bottom: 30px;
        border: 2px solid #769145;
        border-radius: 5px;
        font-size: 16px;
        color: #444;
        background-color: #f8f8f8;
      }

      .btn {
        background-color: #e67e22;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 18px;
        transition: background-color 0.2s;
        display: flex;
        margin: auto;
      }

      .btn:hover {
        background-color: #df762c;
      }

      input::placeholder {
        color: #aaa;
      }

      select {
        padding: 12px;
      }

      #card-errors {
        color: #e74c3c;
        font-size: 14px;
        margin-bottom: 10px;
      }

      /* Add some funky colors */
      input:focus,
      select:focus {
        border-color: #e67e22;
        box-shadow: 0 0 5px rgba(230, 126, 34, 0.5);
      }

      .btn {
        background-color: #f7e2c1;
        color: black;
        font-family: "Poppins", sans-serif; /* Add Poppins font */
      }

      .btn:hover {
        background-color: #afd8f4;
      }

      select {
        border-color: #769145;
        background-color: #ecf0f1;
      }
      .img {
        height: auto;
        width: 30%;
        margin-inline: auto;
        display: flex;
      }

      /* @media screen and (max-width: 3000px) {
        .img {
          width: 30%;
        }
      } */
      @media screen and (max-width: 1000px) {
        .img {
          width: 300px;
          height: auto;
        }
        form {
          width: 250px;
          height: 400px;
        }
      }
    </style>
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <link rel="icon" href="./img.jpg" />
  </head>
  <body>
    <img class="img" src="./img.jpg" alt="Energy Swaraj poster" />
    <form
      id="payment-form"
      method="POST"
      action="https://script.google.com/macros/s/AKfycbzPbZQuhXCd3FkOSzgqn5DZi6oxa_Ql3BeAsPIZKaurWFqLDUG9aCARdFkjjD6xR78fyA/exec"
    >
      <input name="Name" type="text" placeholder="Name" required />
      <input name="Email" type="email" placeholder="Email" required />
      <input
        name="Contact_number"
        type="tel"
        placeholder="Contact Number"
        required
      />
      <select name="Occupation" id="occupation" required>
        <option value="" disabled selected>Select your occupation</option>
        <option value="Professor">Professor</option>
        <option value="Student">Student</option>
        <option value="Other">Other</option>
      </select>
      <div id="card-errors" role="alert"></div>

      <!-- <button class="btn" type="submit">Submit</button> -->
      <button class="btn" type="button" id="razorpay-button">
        Submit and proceed to payment
      </button>
    </form>
    <!-- razorpay payment integration -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const razorpayButton = document.getElementById("razorpay-button");

        razorpayButton.addEventListener("click", function () {
          // Get form inputs
          const nameInput = document.querySelector('input[name="Name"]');
          const emailInput = document.querySelector('input[name="Email"]');
          const contactInput = document.querySelector(
            'input[name="Contact_number"]'
          );
          const occupationInput = document.querySelector(
            'select[name="Occupation"]'
          );

          // Check if all fields are filled
          if (
            nameInput.value.trim() === "" ||
            emailInput.value.trim() === "" ||
            contactInput.value.trim() === "" ||
            occupationInput.value === ""
          ) {
            alert("Please fill in all the required fields.");
            return; // Stop execution
          }

          const options = {
            key: "rzp_test_m0SdYW69BrE0r9",
            key_secret: "ive_dBEOB",
            amount: 100,
            currency: "INR",
            name: "Energy Swaraj",
            description: "Event Registration",
            handler: function (response) {
              console.log(response);
              document.getElementById("payment-form").submit();
            },
            prefill: {
              name: nameInput.value,
              email: emailInput.value,
              contact: contactInput.value,
            },
          };

          const rzp = new Razorpay(options);
          rzp.open();
        });
      });
    </script>
  </body>
</html>
